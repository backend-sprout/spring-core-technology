ì¡°íšŒ ë¹ˆì´ 2ê°œ ì´ìƒì¼ ë•Œ(ë¬¸ì œ)       
====================================

`@Autowired`ëŠ” **íƒ€ì…(Type)ì„ ê¸°ë°˜ìœ¼ë¡œ ì¡°íšŒí•œë‹¤.**            
ê·¸ë ‡ê¸°ì— ë™ì¼í•œ íƒ€ì…ì˜ ë¹ˆì´ 2ê°œ ì¡´ì¬í•œë‹¤ë©´, ì–´ë–¤ ë¹ˆì„ ì£¼ì…í•´ì•¼í• ì§€ ëª¨ë¥´ê¸°ì— ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.       
     
```java
@Component    
class FixDiscountPolicy implements DiscountPolicy {}

@Component
class RateDiscountPolicy implements DiscountPolicy {}

@Service
public class SampleService {
    @Autowired
    private DiscountPolicy discountPolicy;
}
```
```sh
NoUniqueBeanDefinitionException: No qualifying bean of type 
'hello.core.discount.DiscountPolicy' available: expected single matching bean 
but found 2: fixDiscountPolicy,rateDiscountPolicy
```

ìœ„ì™€ ê°™ì€ ì½”ë“œê°€ ì£¼ì–´ì¡Œì„ ë•Œ, `NoUniqueBeanDefinitionException` ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
        
ë‹¨í¸ì ì¸ í•´ê²° ë°©ë²•ìœ¼ë¡œ ìƒìœ„ íƒ€ì…ì´ ì•„ë‹Œ êµ¬ì²´ì ì¸ í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ë„ ìˆì§€ë§Œ,      
**í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ì§€ì •í•˜ëŠ” ê²ƒì€ DIPë¥¼ ìœ„ë°°ì‹œí‚¤ê³  ìœ ì—°ì„±ì„ ë–¨ì–´ëœ¨ë¦°ë‹¤ëŠ” ë¬¸ì œì ì— ì‚¬ìš©ì— ì•Œë§ì§€ ì•Šë‹¤.**        
ë˜í•œ, **ì´ë¦„ë§Œ ë‹¤ë¥´ê³ , ì™„ì „íˆ ë˜‘ê°™ì€ íƒ€ì…ì˜ ìŠ¤í”„ë§ ë¹ˆì´ 2ê°œ ìˆì„ ë•ŒëŠ” í•´ê²°ì´ ì•ˆëœë‹¤.**      

ìŠ¤í”„ë§ ë¹ˆì„ ìˆ˜ë™ ë“±ë¡í•´ì„œ ë¬¸ì œë¥¼ í•´ê²°í•´ë„ ë˜ì§€ë§Œ, ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.   
   
* @Autowired í•„ë“œëª… ë§¤ì¹­
* @Qualifier -> @Qualifier ë¼ë¦¬ ë§¤ì¹­ -> ë¹ˆ ì´ë¦„ ì§€ì •    
* @Primary ì‚¬ìš© 

# ğŸ“• @Autowired í•„ë“œëª…   
> `@Autowired`ëŠ” ë‹¨ìˆœíˆ íƒ€ì…ìœ¼ë¡œë§Œ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì„ ì§„í–‰í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.    

`@Autowired`ëŠ” ì•„ë˜ì™€ ê°™ì€ íƒìƒ‰ ì‚¬ì´í´ì„ ê°–ëŠ”ë‹¤.  

1. íƒ€ì… ë§¤ì¹­
2. í•„ë“œ ì´ë¦„(í•„ë“œ ì´ë¦„ == ë¹ˆ ì´ë¦„)  
3. íŒŒë¼ë¯¸í„° ì´ë¦„(íŒŒë¼ë¯¸í„° ì´ë¦„ == ë¹ˆ ì´ë¦„)

ì¦‰, ì—¬ëŸ¬ ë¹ˆì´ ìˆìœ¼ë©´ **íƒ€ì… -> í•„ë“œ ì´ë¦„/íŒŒë¼ë¯¸í„° ì´ë¦„**ìœ¼ë¡œ ì¶”ê°€ ë§¤ì¹­ì„ ì§„í–‰í•œë‹¤.    
    
**í•„ë“œëª…ì„ ê¸°ì¤€ìœ¼ë¡œ ì˜ì¡´ê´€ê³„ ì£¼ì…**  
```java  
@Autowired
private DiscountPolicy rateDiscountPolicy
```

**íŒŒë¼ë¯¸í„° ì´ë¦„ì„ ê¸°ì¤€ìœ¼ë¡œ ì˜ì¡´ê´€ê³„ ì£¼ì…**   
```java
    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy rateDiscountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = rateDiscountPolicy;
    }
```

ìœ„ì™€ ê°™ì´ ë³€ìˆ˜ëª…ì˜ ì´ë¦„ì„ ë¹ˆì˜ ì‹ë³„ ì´ë¦„ìœ¼ë¡œ ì§€ì •í•´ì£¼ë©´, 
2ê°œ ì´ìƒì˜ ê°™ì€ íƒ€ì…ì˜ ë¹ˆì´ ìˆë‹¤í•˜ë”ë¼ë„ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì… ë°›ì„ ìˆ˜ ìˆë‹¤.      
          
# ğŸ“˜ @Qualifier ì‚¬ìš©     
`@Qualifier` ëŠ” **ì¶”ê°€ êµ¬ë¶„ì**ë¥¼ ë¶™ì—¬ì£¼ëŠ” ë°©ë²•ì´ë‹¤.              
ì£¼ì…ì‹œ ì¶”ê°€ì ì¸ ë°©ë²•ì„ ì œê³µí•˜ëŠ” ê²ƒì´ì§€ **ë¹ˆ ì´ë¦„ì„ ë³€ê²½í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤!**         
**ë¹ˆ ì‹ë³„ì„ ìœ„í•œ ë©”íƒ€ ë°ì´í„°**ë¼ê³  ìƒê°í•˜ë©´ ì´í•´í•˜ê¸° í¸í•˜ë‹¤.         

**RateDiscountPolicy**
```java
@Component
@Qualifier("mainDiscountPolicy")
public class RateDiscountPolicy implements DiscountPolicy {
    ...
}
```    
  
**FixDiscountPolicy**
```
@Component
@Qualifier("subDiscountPolicy")
public class FixDiscountPolicy implements DiscountPolicy {
    ...
}
```  
`@Qualifier`ëŠ” ë¹ˆ ì‹ë³„ì„ ìœ„í•œ ì¶”ê°€ êµ¬ë¶„ì,ì‹ë³„ ë©”íƒ€ ë°ì´í„° ì œê³µ ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.        
ê·¸ë ‡ê¸°ì— ë™ì¼í•œ íƒ€ì…ì˜ ë¹ˆ ë“±ë¡ì‹œ `@Qualifier`ë¥¼ í†µí•´ ì‹ë³„êµ¬ë¬¸ì„ ë„£ì–´ì¤€ë‹¤.   
     
**OrderServiceImpl**
```java
    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, @Qualifier("mainDiscountPolicy") DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
``` 
ê°„ë‹¨í•˜ê²Œ, **ì˜ì¡´ ê´€ê³„ ì£¼ì…ì„ ë°›ì„ ê°ì²´ ì˜†ì— `@Qualifier("ì‹ë³„ì")`ë¥¼ ë¶™ì—¬ì£¼ë©´ ëœë‹¤.**                   
ê·¸ëŸ¬ë©´ `DI ì»¨í…Œì´ë„ˆ`ì—ì„œ í•´ë‹¹í•˜ëŠ” ì‹ë³„ìë¥¼ ê°€ì§„ ë¹ˆì„ ì°¾ì•„ì„œ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì„ ë§ºì–´ì¤€ë‹¤.          
     
**`@Qualifier`ëŠ” ì‚¬ìš© ê°€ëŠ¥ ì˜ì—­(ë‹¨, ì°¸ì¡° ë³€ìˆ˜ ì˜†ì— ë¶™ì—¬ì•¼í•œë‹¤.)**        
* í•„ë“œ ì£¼ì…
* ìƒì„±ì ì£¼ì…
* Setter ì£¼ì…
* ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…
   
**@Qualifier ë§¤ì¹­ ìˆœì„œ ì •ë¦¬**
1. ê°™ì€ ì‹ë³„ìë¥¼ ê°€ì§„ `@Qualifier`ë¼ë¦¬ ë§¤ì¹­    
2. ë¹ˆ ì´ë¦„ ë§¤ì¹­    
3. NoSuchBeanDefinitionException ì˜ˆì™¸ ë°œìƒ   
   
`@Qualifier`ë˜í•œ, `@Autowired`ì²˜ëŸ¼     
ì§€ì •í•œ ì‹ë³„ìë¥¼ ì´ë¦„ìœ¼ë¡œ ê°–ëŠ” ë¹ˆì„ ì¶”ê°€ë¡œ ì°¾ëŠ”ë‹¤.     
í•˜ì§€ë§Œ, `@Qualifier`ë¥¼ ì´ìš©í•œ ë¹ˆ ì¡°íšŒì‹œì—ëŠ” ì´ëŸ¬í•œ ë°©ì‹ì„ ì‚¬ìš©í•˜ì§€ ë§ê³     
**`@Autowired`ë¥¼ ì´ìš©í•œ ë¹ˆ ì°¾ê¸° + `@Qualifier` ì¶”ê°€ êµ¬ë¶„ì** ë¡œë§Œ ì‚¬ìš©í•˜ì        
       
# ğŸ“— @Primary   
> í•„ì(kwj1270)ëŠ” ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ì—†ì§€ë§Œ, ì‹¤ë¬´ì—ì„œëŠ” ë§ì´ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ê°™ë‹¤.     
               
`@Primary`ëŠ” ì˜ì¡´ ê´€ê³„ ì£¼ì…ì‹œ **ìš°ì„ ìˆœìœ„ë¥¼ ì§€ì •í•˜ëŠ” ë©”íƒ€ ë°ì´í„° ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.**          
ì‰½ê²Œ ì„¤ëª…í•˜ë©´, ì—¬ëŸ¬ ë™ì¼í•œ íƒ€ì…ì˜ ë¹ˆë“¤ì¤‘ `@Primary`ê°€ ë¶™ì€ ë¹ˆì„ ìš°ì„ ìœ¼ë¡œ ì£¼ì… ë°›ëŠ”ë‹¤.   

**RateDiscountPolicy**
```java
@Component
@Primary
public class RateDiscountPolicy implements DiscountPolicy {
    ...
}
```
**FixDiscountPolicy**
```java
@Component
public class FixDiscountPolicy implements DiscountPolicy {
    ...
}
```
ë™ì¼í•œ íƒ€ì…ì„ ê°€ì§„ ë¹ˆì´ ì—¬ëŸ¿ ë“±ë¡ ë  ë•Œ,      
ë©”ì¸ì´ ë˜ëŠ” ë¹ˆì— `@Primary` ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤€ë‹¤.      
     
```java
@Component
public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository,DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy; // RateDiscountPolicy ê°€ ë“¤ì–´ì˜¨ë‹¤.  
    }
}
```   
`@Primary`ê°€ ë¶™ì—ˆë˜ ë¹ˆì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§€ê²Œ ë˜ëŠ” ê²ƒì´ê¸°ì— ì¼ë°˜ì ì¸ ì£¼ì… ë°©ë²•ê³¼ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.    
      
## ğŸ“– @Primary VS @Qualifier
`@Primary` ì™€ `@Qualifier` ì¤‘ì— ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ì§€ ê³ ë¯¼ì´ ë  ê²ƒì´ë‹¤.      
      
**ì¶”ì²œ ì‚¬ìš©**
* `@Qualifier`ëŠ” ëª¨ë“  ì½”ë“œì— `@Qualifier` ë¥¼ ë¶™ì—¬ì£¼ì–´ì•¼ í•œë‹¤. 
* `@Primary`ëŠ” ì—°ê´€ëœ ë¹ˆë“¤ì—ì„œ ë‹¨ í•œë²ˆë§Œ ì„ ì–¸í•˜ë©´ëœë‹¤.            
* ê²°êµ­, `@Qualifier` ì´ë¦„ì„ ë§ì¶°ì£¼ê³  ì—¬ëŸ¬ê³³ì— ì„ ì–¸í•´ì•¼í•˜ë‹ˆ ê´€ë¦¬í•˜ê¸° ì–´ë µë‹¤.        
* **ê·¸ë ‡ê¸°ì— @Primary ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤**       	    
* ë¬¼ë¡ , 2ê°œë¥¼ í˜¼í•©í•´ì„œ ì‚¬ìš©í•´ë„ ëœë‹¤.  	         
       
**ìš°ì„ ìˆœìœ„**      
* `@Primary`ì™€ `@Qualifier` 2ê°œê°€ í•¨ê»˜ ì‚¬ìš©ëœë‹¤ë©´ **@Qualifier** ê°€ ìš°ì„ ê¶Œì´ ë†’ë‹¤.     
   
# List, Map ì£¼ì…ë°›ê¸°   
`List`, `Map`ê³¼ ê°™ì€ **ì»¬ë ‰ì…˜ í”„ë ˆì„ì›Œí¬ë¥¼ ì˜ì¡´ê´€ê³„ ì£¼ì… ë°›ì„ ìˆ˜ ìˆë‹¤.**          
      
**ê·¸ëŸ°ë° ì–´ë–»ê²Œ ì‚¬ìš©ì„ í•˜ì§€? ğŸ¤”**                       
* ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— `ê°™ì€ íƒ€ì…ì˜ ì—¬ëŸ¬ ë¹ˆ`ì´ ì¡´ì¬í•  ê²½ìš°    
* í•„ë“œë‚˜ íŒŒë¼ë¯¸í„° ë³€ìˆ˜ì˜ íƒ€ì…ì´ `Collection`,`List`, `Map`ì¼ ê²½ìš°  
   
ìœ„ì™€ ê°™ì€ ì¡°ê±´ì„ ë§Œì¡±í•  ê²½ìš°, **ì»¬ë ‰ì…˜ìœ¼ë¡œ ë„˜ê²¨ì£¼ì–´ í•œ ë²ˆì— ì˜ì¡´ ê´€ê³„ë¥¼ ë§ºê²Œ í•´ì¤€ë‹¤.**             
  
```java
@Service
public class SampleService {
    
    private final List<DiscountPolicy> discountPolicies;
    
    public SampleService(List<DiscountPolicy> discountPolicies) {
        this.discountPolicies = discountPolicies;
    }
}
```
             
ì´ ì ì„ ì˜ ì´ìš©í•œë‹¤ë©´, `Map`ì—ì„œ ê°ê°ì˜ ê°ì²´ë¥¼ ë°”ë¡œ êº¼ë‚´ ì½”ë“œì˜ ë³€ê²½ì—†ì´ ë‹¤ì–‘í•œ ì „ëµì„ êµ¬í˜„ì‹œí‚¬ ìˆ˜ ìˆë‹¤.        

# Autowired ë™ì‘ ì›ë¦¬
```java
package org.springframework.beans.factory.config;

import org.springframework.beans.BeansException;
import org.springframework.lang.Nullable;

public interface BeanPostProcessor {

	@Nullable
	default Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
		return bean;
	}

	@Nullable
	default Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
		return bean;
	}

}

```

# ì°¸ê³  
[ğŸ’¾ Knowledge Repository](https://atoz-develop.tistory.com/entry/Spring-Autowired-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC-BeanPostProcessor)

