í”„ë¡œí¼í‹°     
==============       
`Spring`ì—ì„œ `properties`ì— ëŒ€í•œ ì„¤ì •ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì— ìˆì–´ ê°€ì¥ ê¸°ë³¸ì ì´ë©´ì„œ ì¤‘ìš”í•œ ì‘ì—…ì´ë‹¤.               
íŠ¹íˆ `Spring boot` ì—ì„œëŠ” `autoConfiguration` ê³¼ ê´€ë ¨í•˜ì—¬ ë¹ˆ ì„¤ì •ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.                          
ê·¸ë ‡ê¸°ì— í”„ë¡œí¼í‹°ì— ëŒ€í•´ì„œ ì œëŒ€ë¡œ ì •ë¦¬ë¥¼ í•´ë³´ê³  ì´ë¥¼ í†µí•´ ì•Œë§ê²Œ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ëŠ” ëŠ¥ë ¥ì„ ê¸°ë¥´ê³ ì í•œë‹¤.                     
            
# í™˜ê²½ í”„ë¡œí¼í‹° íŒŒì¼   
`Spring boot` í”„ë¡œí¼í‹° íŒŒì¼ì€ **ì„¤ì • ê´€ë ¨ ë° ê¸°íƒ€ ì •ì ì¸ ê°’ì„ `key/value` í˜•ì‹ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤.**           
ì´ íŒŒì¼ì„ ì‚¬ìš©í•˜ë©´ **ê¸°ì¡´ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ ë³µì¡í•œ XML ì„¤ì •ì„ íŒŒì¼ í•˜ë‚˜ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤.**           
             
```properties  
server.port=80   
```    
ê¸°ì¡´ì—ëŠ” `.properties` íŒŒì¼ì„ ë§ì´ ì‚¬ìš©í•˜ì§€ë§Œ   
ìµœê·¼ì—ëŠ” í‘œí˜„ì˜ í•œê³„ë¡œ **YAML íŒŒì¼ì„ ë” ë§ì´ ì‚¬ìš©í•œë‹¤.**         
        
```yml
server:
      port: 80
```   
`yml(yaml)`ì˜ ê²½ìš° í”„ë¡œí¼í‹° ì„¤ì •ê°’ì˜ ê¹Šì´ì— ë”°ë¼ ë“¤ì—¬ì“°ê¸°ë¥¼ í•´ì„œ **ê³„ì¸µ êµ¬ì¡°ë¡œ í›¨ì”¬ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.**           
`yaml`ì„ ì„¤ì •í•˜ë ¤ë©´ `SnakeYAML ë¼ì´ë¸ŒëŸ¬ë¦¬`ë¥¼ í¬í•¨í•´ì•¼ í•˜ì§€ë§Œ **`springboot-starter`ì— ê¸°ë³¸ì ìœ¼ë¡œ ë‚´ì¥ë˜ì–´ìˆë‹¤.**                
ì¦‰, **`springboot-starter`ë¥¼ ì‚¬ìš©í•˜ë©´ ë³„ë„ì˜ ì„¤ì • ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.**      
      
**properties vs yml ğŸ¤”**         
* `application.properties` ì™€ `application.yml`ì´ ë™ì‹œì— ì¡´ì¬í•˜ë©´ `.yml` íŒŒì¼ì´ ì‹¤í–‰ëœë‹¤.   
      
# í”„ë¡œí¼í‹° íŒŒì¼ ë°”ì¸ë”©   
í”„ë¡œí¼í‹° íŒŒì¼ì„ ë°”ì¸ë”©í•˜ëŠ” ë°©ë²•ì€ ì•„ë˜ 2ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤.   

* `@Value` 
* `@ConfigurationProperties`


**ìœ ì—°í•œ ë°”ì¸ë”©**   
í”„ë¡œí¼í‹°ê°’ì„ ê°ì²´ì— ë°”ì¸ë”©í•  ê²½ìš° í•„ë“œë¥¼ ë‚™íƒ€í‘œê¸°ë²•(aBc)ìœ¼ë¡œ ì„ ì–¸í•˜ê³         
í”„ë¡œí¼í‹°ì˜ í‚¤ëŠ” ë‹¤ì–‘í•œ í˜•ì‹(ë‚™íƒ€, ì¼€ë°¥, ìŠ¤ë„¤ì´í¬)ìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ ë°”ì¸ë”©í•  ìˆ˜ ìˆë‹¤.      
      
**ë©”íƒ€ë°ì´í„° ì§€ì›**     
í”„ë¡œí¼í‹°ì˜ í‚¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ë©”íƒ€ë°ì´í„° íŒŒì¼ë¡œ ì œê³µí•©ë‹ˆë‹¤.                     
í‚¤ì˜ ì´ë¦„, íƒ€ì…, ì„¤ëª…, ë””í´íŠ¸ê°’ ë“± í‚¤ ì‚¬ìš©ì— ì•ì„œ íŒíŠ¸ê°€ ë˜ëŠ” ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.                    
       
**SpEL(Spring Expression Language, ìŠ¤í”„ë§ í‘œí˜„ì–¸ì–´) í‰ê°€**          
SpELì€ ëŸ°íƒ€ì„ì— ê°ì²´ ì°¸ì¡°ì— ëŒ€í•´ ì§ˆì˜í•˜ê³  ì¡°ì‘í•˜ëŠ” ê¸°ëŠ¥ì„ ì§€ì›í•˜ëŠ” ì–¸ì–´ë‹¤.              
íŠ¹íˆ ë©”ì†Œë“œ í˜¸ì¶œ ë° ê¸°ë³¸ ë¬¸ìì—´ í…œí”Œë¦¿ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.          
`@Value`ë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.              
             
## @Value   
í”„ë¡œí¼í‹°ì˜ `key`ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì •í•œ ê°’ì„ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.              
`key`ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì•¼ í•˜ë©° ê°’ì´ ì—†ì„ ê²½ìš°ì— ëŒ€í•´ì„œëŠ” ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í•œë‹¤.       
    
```yml
property:
  test:
    name: property depth test
propertyTest: test
propertyTestList: a,b,c
``` 

**AutoConfigurationApplicationtests**     
```java
@SpringBootTest
public class PropertiesBindingTest {

    @Value("${property.test.name}")
    String propertyTestName;
    
    @Value("${propertyTest}")
    String propertyTest;
    
    @Value("${noKey:default value}")
    String defaultValue;
    
    @Value("${propertyTestList}")
    String[] propertyTestArray;
    
    @Value("#{'${propertyTestList}'.split(',')}")
    List<String> propertyTestList;

    @Test
    public void test() {
        assertAll(
                () -> assertThat(propertyTestName).isEqualTo("property depth test"),
                () -> assertThat(propertyTest).isEqualTo("test"),
                () -> assertThat(defaultValue).isEqualTo("default value"),
                () -> assertThat(propertyTestArray).containsExactly("a", "b", "c"),
                () -> assertThat(propertyTestList).containsExactly("a", "b", "c")
        );
    }
}
```
`@Value` ë§¤í•‘ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.     

* `@Value("${property.test.name}")` : ê¹Šì´ê°€ ì¡´ì¬í•˜ëŠ” `key`ì— ëŒ€í•´ `.` ë¡œ êµ¬ë¶„í•˜ì—¬ ê°’ì„ ë§¤í•‘í•œë‹¤.   
* `@Value("${propertyTest}")` : ë‹¨ì¼ `key`ì— ë§¤ì¹­ ë˜ëŠ” ê°’ì„ ë§¤í•‘í•œë‹¤.   
* `@Value("${noKey:default value}")` : YAML íŒŒì¼ì— í‚¤ê°’ì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ **ë””í´íŠ¸ê°’ì´ ë§¤í•‘**ë˜ë„ë¡ ì„¤ì •í•œë‹¤.    
* `@Value("${propertyTestList}")` : ì—¬ëŸ¬ê°’ì„ ë‚˜ì—´í•  ë•ŒëŠ” ë°°ì—´í˜•ìœ¼ë¡œ ë§¤í•‘í•œë‹¤ `(ê°’ì´ ì—¬ëŸ¬ê°œë©´ ë°°ì—´ë¡œë°›ëŠ”ë‹¤.)`   
* `@Value("#{'${propertyTestList}'.split(',')}")` : **SpEL**ì„ ì‚¬ìš©í•˜ì—¬ `,` ê¸°ì¤€ìœ¼ë¡œ Listì— ë§¤í•‘í•œë‹¤.   
    * `@Value`ì€ `@ConfigurationProperties`ì™€ ë‹¬ë¦¬ `SpEL`ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
         
`YAML í”„ë¡œí¼í‹° íŒŒì¼`ì—ì„œ ì„¤ì •í•œ `key/value`ë¥¼    
`@Value`ì˜ í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ ì£¼ë©´ í•´ë‹¹ ê°’ì´ í•„ë“œê°’ì— í• ë‹¹ë˜ëŠ” ë°©ì‹ì´ë©° ì£¼ë¡œ ë‹¨ì¼ í•„ë“œê°’ì„ ê°€ì ¸ì˜¤ëŠ”ë° ì‚¬ìš©í•œë‹¤.       

## @ConfigurationProperties    
`@ConfigurationProperties`ì˜ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ë©´ **ë‹¤ì–‘í•œ íƒ€ì…ì˜ í”„ë¡œí¼í‹°ê°’ì„ ë§¤í•‘í•  ìˆ˜ ìˆë‹¤.**      
`@ConfigurationProperties`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **ì ‘ë‘ì‚¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°’ì„ ë°”ì¸ë”©í•œë‹¤.**             
`@ConfigurationProperties`ëŠ” `@Value`ë³´ë‹¤ ê°ì²´ì§€í–¥ì ìœ¼ë¡œ í”„ë¡œí¼í‹°ë¥¼ ë§¤í•‘í•  ìˆ˜ ìˆë‹¤.         
      
```yml  
fruit:
  list:
    - name: banana
      color: yellow
    - name: apple
      full: jangsu apple
    - name: water melon
      taste: good
```   
            
```java  
@Component
@ConfigurationProperties("fruit")
public class Fruit {
    private List<Map<String, String>> list;

    public Fruit(List<Map<String, String>> list) {
        this.list = list;
    }

    public List<Map<String, String>> getList() {
        return list;
    }

}
```  
```java
@SpringBootTest
class FruitTest {

    @Autowired
    Fruit fruit;

    @Test
    public void test() {
        List<Map<String, String>> list = fruit.getList();
        String color = list.get(0).get("color");
        String full = list.get(1).get("full");
        String taste = list.get(2).get("taste");

        assertAll(
                () -> assertThat(color).isEqualTo("yellow"),
                () -> assertThat(full).isEqualTo("jangsu apple"),
                () -> assertThat(taste).isEqualTo("good")
        );
    }
}
```
`list` ë¼ëŠ” í”„ë¡œí¼í‹° í‚¤ë¥¼ í†µí•´ `List<>` í•„ë“œë¡œ ë°”ì¸ë”©í•  ìˆ˜ ìˆë‹¤.       
    
`@ConfigurationProperties`ì„ ì‚¬ìš©í•˜ë ¤ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë¹ˆì´ ë“±ë¡ë˜ì–´ì•¼í•œë‹¤.       
ì¦‰, í´ë˜ìŠ¤ë¥¼ `@Component`ì™€ ê°™ì´ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒì„ ì„ ì–¸ì„ í•´ì•¼í•œë‹¤.        
    
`@ConfigurationProperties`ëŠ” `prefix=""`ì†ì„±ì„ ê°€ì§€ê³  ìˆì–´ì„œ     
í”„ë¡œí¼í‹° íŒŒì¼ì—ì„œ ì¼ì¹˜í•˜ëŠ” ì ‘ë‘ì‚¬ í‚¤ê°€ ìˆëŠ” ê°’ì„ ì½ì–´ ì™€ì„œ í•„ë“œê°’ì— ë§¤í•‘í•œë‹¤.           
     
ê·¸ëŸ¬ë‚˜ `@ConfigurationProperties`ëŠ” ê¸°ë°˜ìœ¼ë¡œ ë°”ì¸ë”©ì„ í•˜ê¸°ì—  

     
   
       
      

**PropertyTest**    
```java
package com.demo.pojo;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.test.context.junit4.SpringRunner;

import java.util.List;
import java.util.Map;

import static org.hamcrest.Matchers.is;
import static org.junit.Assert.assertThat;

@RunWith(SpringRunner.class)
@ComponentScan({"com.demo.pojo"})
@EnableConfigurationProperties(com.demo.pojo.FruitProperty.class)
@SpringBootTest(classes = {com.demo.pojo.PropertyTest.class})
public class PropertyTest {

    @Autowired
    FruitProperty fruitProperty;

    @Test
    public void test(){
        List<Map> fruitData = fruitProperty.getList();

        assertThat(fruitData.get(0).get("name"), is("banana"));
        assertThat(fruitData.get(0).get("color"), is("yellow"));

        assertThat(fruitData.get(1).get("name"), is("apple"));
        assertThat(fruitData.get(1).get("color"), is("red"));

        assertThat(fruitData.get(2).get("name"), is("water melon"));
        assertThat(fruitData.get(2).get("color"), is("green"));

        /*
    }
}
```
### 4.4.1. ```@ConfigurationProperties``` ì‚´í´ë³´ê¸° - POJO ë°©ì‹      
```@ConfigurationProperties```ëŠ” ê¸°ë³¸ ì»¬ë ‰ì…˜ íƒ€ì…ë¿ë§Œ ì•„ë‹ˆë¼ POJO(Plain Old Java Object) íƒ€ì… ë§¤í•‘ë„ ì§€ì›í•©ë‹ˆë‹¤.    
ê¸°ì¡´ ```List<Map> list;``` ë°©ì‹ë³´ë‹¤ëŠ” ```List<Fruit(POJO)> list``` ì´ëŸ°ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ **ì§ê´€ì ì´ê³  ëª…í™•í•˜ê²Œ ê°ì²´ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**      

```
POJO ë°©ì‹ì€ Java EE ì™€ ê°™ì€ íŠ¹ì • í”„ë ˆì„ì›Œí¬ì— ì¢…ì†ì ì´ì§€ ì•Šì€ ìë°” ê°ì²´ë¥¼ ì˜ë¯¸í•œë‹¤. -> ì˜› 
```

ë¨¼ì € Fruit POJO í´ë˜ìŠ¤ë¥¼ ìƒì„±í•´ì¤ì‹œë‹¤.     

1. ```main``` -> ```java``` -> ```com``` -> ```demo``` -> ```pojo``` ì—ì„œ Fruit í´ë˜ìŠ¤ ìƒì„±  
2. ì•„ë˜ì™€ ê°™ì€ ì½”ë“œ ì…ë ¥   

**Fruit**
```java
package com.demo.pojo;

import lombok.Data;

@Data
public class Fruit {
    private String name;
    private String color;
}
```
```Fruit``` í´ë˜ìŠ¤ë¥¼ ìƒì„±í–ˆë‹¤ë©´ ```FruitProperty``` í´ë˜ìŠ¤ì—ì„œ ê¸°ì¡´ì˜ ```Map``` íƒ€ì…ì„ ì•ì„œ ìƒì„±í•œ ```Fruit``` íƒ€ì…ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
  
**FruitProperty**
```java
package com.demo.pojo;

import lombok.Data;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

import java.util.List;

@Data
@Component
@ConfigurationProperties("fruit")
public class FruitProperty {
    private List<Fruit> list;
}
```
```PropertyTest``` í´ë˜ìŠ¤ì—ì„œ ```Map``` ì˜ ```get()``` ë©”ì†Œë“œê°€ ì•„ë‹Œ        
```Fruit```ì˜ ê°ì²´ ë©”ì„œë“œ(getter)ë¥¼ ì‚¬ìš©í•˜ì—¬ name ê³¼ color ê°’ì„ ì½ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.         
    
**PropertTest**
```java
package com.demo.pojo;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.test.context.junit4.SpringRunner;

import java.util.List;
import java.util.Map;

import static org.hamcrest.Matchers.is;
import static org.junit.Assert.assertThat;

@RunWith(SpringRunner.class)
@ComponentScan({"com.demo.pojo"})
@EnableConfigurationProperties(com.demo.pojo.FruitProperty.class)
@SpringBootTest(classes = {com.demo.pojo.PropertyTest.class})
public class PropertyTest {

    @Autowired
    FruitProperty fruitProperty;

    @Test
    public void test(){
        List<Fruit> fruitData = fruitProperty.getList();

        assertThat(fruitData.get(0).getName(), is("banana"));
        assertThat(fruitData.get(0).getColor(), is("yellow"));

        assertThat(fruitData.get(1).getName(), is("apple"));
        assertThat(fruitData.get(1).getColor(), is("red"));

        assertThat(fruitData.get(2).getName(), is("water melon"));
        assertThat(fruitData.get(2).getColor(), is("green"));

        /*
        System.out.println(fruitData.get(0).get("name"));
        System.out.println(fruitData.get(0).get("color"));

        System.out.println(fruitData.get(1).get("name"));
        System.out.println(fruitData.get(1).get("color"));

        System.out.println(fruitData.get(2).get("name"));
        System.out.println(fruitData.get(2).get("color"));

        */
    }
}
```    
ì´ì œ ë˜‘ê°™ì´ Runì„ ì‹œì¼œì¤˜ì„œ ë¬¸ì œê°€ ì—†ìœ¼ë©´ ì„±ê³µì¸ ê²ƒì…ë‹ˆë‹¤.    

## 4.5. ```@ConfigurationProperties``` ì˜ ìœ ì—°í•œ ë°”ì¸ë”©   
```@ConfigurationProperties``` ì—ì„œ ìœ ì—°í•œ ë°”ì¸ë”©ì´ë€    
í”„ë¡œí¼í‹°ê°’ì„ ê°ì²´ì— ë°”ì¸ë”©í•  ê²½ìš° í•„ë“œë¥¼ ë‚™íƒ€ í‘œê¸°ë²•ìœ¼ë¡œ ì„ ì–¸í•˜ê³     
í”„ë¡œí¼í‹°ì˜ í‚¤ëŠ” ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ ë°”ì¸ë”©í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤.   
      
**ì˜ˆì‹œ ì½”ë“œ - ì‘ì„±x**
```java
@Data
@Component
@ConfigurationProperties("fruit")
public class FruitProperty {
    private String colorName;
}
```
```colorName``` í•„ë“œë¥¼ ì„ ì–¸í–ˆìŠµë‹ˆë‹¤.     
ì´ì œ í”„ë¡œí¼í‹°ëª…ì„ ì§€ì–´ì„œ í•„ë“œì— ë°”ì¸ë”©í•´ë³´ê² ìŠµë‹ˆë‹¤.       
ë†€ëê²Œë„ ë‹¤ìŒê³¼ ê°™ì´ ë‹¤ì–‘í•œ í”„ë¡œí¼í‹°ëª…ì´ ëª¨ë‘ colorName í•„ë“œì— ë°”ì¸ë”© ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.         
   
* fruit.color-name    
* fruit.color_name    
* fruit.colorName    
* fruit.Colorname     
      
```
ê¸°ì¡´ ë²„ì „ì—ì„œëŠ” í”„ë¡œí¼í‹°ëª…ì— ë‚™íƒ€í‘œê¸°ë²•, ì–¸ë”ë°” í‘œê¸°ë²•, ëŒ€ë¬¸ì ë“±ì„ ëª¨ë‘ ì§€ì›í–ˆì§€ë§Œ   
ìŠ¤í”„ë§ë¶€íŠ¸ 2.0 ë¶€í„°ëŠ” ì†Œë¬¸ìë‚˜ ì¼€ë°¥ í‘œê¸°ë²•ë§Œ ì§€ì›í•©ë‹ˆë‹¤.   
```

*** 
# 5. ìë™ í™˜ê²½ ì„¤ì • ì´í•´í•˜ê¸°         
ìë™ í™˜ê²½ ì„¤ì •ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ì¥ì ì´ë©° ë§¤ìš° ì¤‘ìš”í•œ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.               
ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ìë™ ì„¤ì • (Spring Boot auto-configuration)ì€ Web, H2, JDBCë¥¼ ë¹„ë¡¯í•´ ì•½ 100ì—¬ ê°œì˜ ìë™ ì„¤ì •ì„ ì œê³µí•©ë‹ˆë‹¤.            
ê·¸ë¦¬ê³  ìƒˆë¡œ ì¶”ê°€ë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬(JAR)ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ ìë™-ì„¤ì • ì˜ì¡´ì„±ì— ë”°ë¼ì„œ ì„¤ì •ì´ ìë™ ì ìš©ë©ë‹ˆë‹¤.            
          
ë§Œì•½ H2 ì˜ì¡´ì„±ì´ í´ë˜ìŠ¤ ê²½ë¡œì— ì¡´ì¬í•œë‹¤ë©´ ìë™ìœ¼ë¡œ ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•©ë‹ˆë‹¤.           
ì´ëŸ° ë§ˆë²•ê°™ì€ ìë™ ì„¤ì •ì€ ```@EnableAutoConfiguration```ë˜ëŠ” ì´ë¥¼ í¬í•¨í•œ ```@SpringBootApplication```ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.        
(```@EnableAutoConfiguration```ì€ í•­ìƒ ```@Configuration```ê³¼ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.)           
     
ì—¬ê¸°ì„œ ```@SpringBootApplication```ì€ ìë™ ì„¤ì •ë¿ë§Œ ì•„ë‹ˆë¼ ë¶€íŠ¸ ì‹¤í–‰ì— ìˆì–´ì„œ í•„ìˆ˜ì ì¸ ì–´ë…¸í…Œì´ì…˜ì´ê¸°ë„ í•©ë‹ˆë‹¤. (```Application.java```)            
ê·¸ëŸ¼ ```@SpringBootApplication```ì˜ ë‚´ë¶€ëŠ” ì–´ë–»ê²Œ êµ¬ì„±ë˜ì–´ìˆëŠ”ì§€ ì‚´í´ë³´ë©° ìë™ í™˜ê²½ ì„¤ì •ì˜ ì›ë¦¬ë¥¼ ì°¨ê·¼ì°¨ê·¼ íŒŒì•…í•´ë³´ê² ìŠµë‹ˆë‹¤.       
     
## 5.1. ìë™ í™˜ê²½ ì„¤ì • ì–´ë…¸í…Œì´ì…˜   
ê¸°ì¡´ì˜ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í–ˆë‹¤ë©´ ì˜ì¡´ì„±ì„ ì¼ì¼ì´ ë¹ˆ ```<bean>```ìœ¼ë¡œ ì„¤ì •í–ˆì„ ê²ë‹ˆë‹¤.        
ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ê´€ë ¨ ì˜ì¡´ì„±ì„ ìŠ¤íƒ€í„°(starter)ë¼ëŠ” ë¬¶ìŒìœ¼ë¡œ ì œê³µí•˜ë©° **ìˆ˜ë™ ì„¤ì •ì„ ì§€ì–‘**í•©ë‹ˆë‹¤.      
ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ ìŠ¤íƒ€í„°ì— ìˆëŠ” ìë™ ì„¤ì •ì´ ì ìš©ë˜ëŠ”ì§€ ì›ë¦¬ë¥¼ ì•Œì•„ë´…ì‹œë‹¤.       
   
ë¨¼ì € ì½”ë“œìƒì—ì„œ ë¶„ì„ì„ í•´ë³´ê² ìŠµë‹ˆë‹¤.      
```@SpringBootApplication```ì˜ ë‚´ë¶€ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.      
    
**@SpringBootApplication**       
```java
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration // (1)
@EnableAutoConfiguration // (2)
@ComponentScan(excludeFilters = { // (3)
		@Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),
		@Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })
public @interface SpringBootApplication {
```
**ì†ŒìŠ¤ ì½”ë“œ í•´ì„**    
```java     
@SpringBootConfiguration :   

* ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ì„¤ì •ì„ ë‚˜íƒ€ë‚´ëŠ” ì–´ë…¸í…Œì´ì…˜ì…ë‹ˆë‹¤.   
* ìŠ¤í”„ë§ì˜ @Configurationì„ ëŒ€ì²´í•˜ë©° ìŠ¤í”„ë§ ë¶€íŠ¸ ì „ìš©ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.   
* ì˜ˆë¥¼ ë“¤ì–´ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ í…ŒìŠ¤íŠ¸ ì–´ë…¸í…Œì´ì…˜ (@SpringbootTest)ì„ ì‚¬ìš©í•  ë•Œ ì°¾ê¸° ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬   
  ê³„ì† @SpringBootConfiguration ì–´ë…¸í…Œì´ì…˜ì„ ì°¾ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” í•„ìˆ˜ ì–´ë…¸í…Œì´ì…˜ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. 

_____________________________________________________________________________________________________
@EnableAutoConfiguration :   

* ìë™ ì„¤ì •ì˜ í•µì‹¬ ì–´ë…¸í…Œì´ì…˜ì…ë‹ˆë‹¤.   
* í´ë˜ìŠ¤ ê²½ë¡œì— ì§€ì •ëœ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ì˜ë¦¬í•˜ê²Œ ì„¤ì • ìë™í™”ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.   
* íŠ¹ë³„í•œ ì„¤ì •ê°’ì„ ì¶”ê°€í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.     
   
_____________________________________________________________________________________________________
@ComponentScan( basePackages-ê²½ë¡œ ) :   

* íŠ¹ì • íŒ¨í‚¤ì§€ ê²½ë¡œë¥¼ ê¸°ë°˜ìœ¼ë¡œ @Configurationì—ì„œ ì‚¬ìš©í•  @Component ì„¤ì • í´ë˜ìŠ¤ë¥¼ ì°¾ìŠµë‹ˆë‹¤.       
* @ComponentScanì˜ basePackages í”„ë¡œí¼í‹°ê°’ì— ë³„ë„ì˜ ê²½ë¡œë¥¼ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´    
  @ComponentScanì´ ìœ„ì¹˜í•œ íŒ¨í‚¤ì§€ê°€ ë£¨íŠ¸ ê²½ë¡œë¡œ ì„¤ì •ë©ë‹ˆë‹¤.   
```    
```@SpringBootApplication``` ì–´ë…¸í…Œì´ì…˜ì€ ```@SpringBootConfiguration``` + ```@EnableAutoConfiguration``` + ```@ComponentScan```ì˜ ì¡°í•©ì´ë‹¤.  
ì´ ì¤‘ì—ì„œ ```@EnableAutoConfiguration```ì´ ìš°ë¦¬ê°€ ì‚´í´ë³¼ ìë™ í™˜ê²½ ì„¤ì •ì˜ í•µì‹¬ ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.   

## 5.2. ```@EnableAutoConfiguration``` ì‚´í´ë³´ê¸° 
ìë™ ì„¤ì •ì„ ê´€ì¥í•˜ëŠ” ```@EnableAutoConfiguration``` ë‚´ë¶€ë¥¼ ì‚´í´ë³´ì    

**@EnableAutoConfiguration**
```java
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@AutoConfigurationPackage
@Import(AutoConfigurationImportSelector.class) // â˜…
public @interface EnableAutoConfiguration {
```
ìœ„ ì½”ë“œì¤‘ ìë™ ì„¤ì •ì„ ì§€ì›í•´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì€ ```@Import(AutoConfigurationImportSelector.class)``` ì…ë‹ˆë‹¤.          
í´ë˜ìŠ¤ëª…ì„ í†µí•´ ì•Œ ìˆ˜ ìˆëŠ” ì ì€ ```ì„í¬íŠ¸í•  ìë™ ì„¤ì •ì„ ì„ íƒí•œë‹¤```ëŠ” ì˜ë¯¸ë¡œ í•´ì„ë©ë‹ˆë‹¤.         
       
```AutoConfigurationImportSelector```í´ë˜ìŠ¤ë„ ìì„¸íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.    
    
**AutoConfigurationImportSelector**   
```java 
public class AutoConfigurationImportSelector
		implements DeferredImportSelector, BeanClassLoaderAware, ResourceLoaderAware,
		BeanFactoryAware, EnvironmentAware, Ordered {
		
	...............
	...............
	...............
	
	@Override
	public String[] selectImports(AnnotationMetadata annotationMetadata) {
		if (!isEnabled(annotationMetadata)) {
			return NO_IMPORTS;
		}
		AutoConfigurationMetadata autoConfigurationMetadata = AutoConfigurationMetadataLoader
				.loadMetadata(this.beanClassLoader);
		AnnotationAttributes attributes = getAttributes(annotationMetadata);
		List<String> configurations = getCandidateConfigurations(annotationMetadata,
				attributes);
		configurations = removeDuplicates(configurations);
		Set<String> exclusions = getExclusions(annotationMetadata, attributes);
		checkExcludedClasses(configurations, exclusions);
		configurations.removeAll(exclusions);
		configurations = filter(configurations, autoConfigurationMetadata);
		fireAutoConfigurationImportEvents(configurations, exclusions);
		return StringUtils.toStringArray(configurations);
	}
	
	...............
	...............
	...............
}	
```
ë‚´ë¶€ ì½”ë“œê°€ ì¢€ ë³µì¡í•´ ë³´ì´ì§€ë§Œ í•µì‹¬ê³¼ ê³¼ì • ìœ„ì£¼ë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.     
```AutoConfigurationImportSelector``` í´ë˜ìŠ¤ëŠ” ```DeferredImportSelector```ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¡œ    
**ì˜¤ë²„ë¼ì´ë“œ ë°›ì€ ```selectImports()```ë©”ì„œë“œê°€ ìë™ ì„¤ì •í•  ë¹ˆì„ ê²°ì •í•©ë‹ˆë‹¤.**      
      
```java
	AutoConfigurationMetadata autoConfigurationMetadata = AutoConfigurationMetadataLoader.loadMetadata(this.beanClassLoader);
	AnnotationAttributes attributes = getAttributes(annotationMetadata);
	List<String> configurations = getCandidateConfigurations(annotationMetadata, attributes);   
```
ëª¨ë“  í›„ë³´ ë¹ˆì„ ```getCandidateConfigurations()``` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.           
ë” ìì„¸íˆ ì„¤ëª…í•˜ìë©´ ```META-INF/spring.factories```ì— ì •ì˜ëœ ìë™ ì„¤ì •í•  í´ë˜ìŠ¤ë“¤ì„ ë¨¼ì € ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.      
ëŒ€ëµ 100ì—¬ ê°œ ì •ë„ì˜ ì„¤ì •ì´ ë¯¸ë¦¬ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.           
   
ì¦‰, ìë™ ì„¤ì •í•  í´ë˜ìŠ¤ ëª©ë¡ë“¤ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.      
  
```java

	configurations = removeDuplicates(configurations);
	Set<String> exclusions = getExclusions(annotationMetadata, attributes);
```

ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„°ë¥¼ ì—¬ëŸ¬ ê°œ ë“±ë¡í•˜ì—¬ ì‚¬ìš©í•  ê²½ìš° ë‚´ë¶€ì— ì¤‘ë³µëœ ë¹ˆì´ ì„¤ì •ë  ê²½ìš°ê°€ ë¹ˆë²ˆí•©ë‹ˆë‹¤.          
**ì´ëŸ¬í•œ ê²½ìš°ë¥¼ ìœ„í•´ ì¤‘ë³µëœ ì„¤ì • ```removeDuplicates()``` ê³¼ ì œì™¸í•  ì„¤ì • ```getExclusions()```ì„ ì œì™¸ì‹œì¼œì¤ë‹ˆë‹¤.**       

```java
	checkExcludedClasses(configurations, exclusions);
	configurations.removeAll(exclusions);
	configurations = filter(configurations, autoConfigurationMetadata);
	fireAutoConfigurationImportEvents(configurations, exclusions);
	return StringUtils.toStringArray(configurations);
```
ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ ì¤‘ì—ì„œ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆë§Œ ì„í¬íŠ¸í•  ìë™ ì„¤ì • ëŒ€ìƒìœ¼ë¡œ ì„ íƒí•©ë‹ˆë‹¤.      
     
ê·¸ë ‡ë‹¤ë©´ ë¹ˆì˜ ë“±ë¡ê³¼ ìë™ ì„¤ì •ì— í•„ìš”í•œ íŒŒì¼ì€ ë¬´ì—‡ì¼ê¹Œìš”?          
ì•„ë˜ì™€ ê°™ì€ íŒŒì¼ì´ ë¹ˆ ë“±ë¡ê³¼ ìë™ ì„¤ì •ì— ì‚¬ìš©ë©ë‹ˆë‹¤.          
     
* META-INF/spring.factories :           
ìë™ ì„¤ì • íƒ€ê¹ƒ í´ë˜ìŠ¤ ëª©ë¡ì…ë‹ˆë‹¤.        
ì¦‰, ì´ê³³ì—ì„œ ì„ ì–¸ë˜ì–´ ìˆëŠ” í´ë˜ìŠ¤ë“¤ì´ ```@EnableAutoConfiguration``` ì‚¬ìš© ì‹œ ìë™ ì„¤ì • íƒ€ê¹ƒì´ ë©ë‹ˆë‹¤.        
       
* META-INF/spring-configuration-metadata.json :      
ìë™ ì„¤ì •ì— ì‚¬ìš©í•  í”„ë¡œí¼í‹° ì •ì˜ íŒŒì¼ì…ë‹ˆë‹¤.         
ë¯¸ë¦¬ êµ¬í˜„ë˜ì–´ ìˆëŠ” ìë™ ì„¤ì •ì— í”„ë¡œí¼í‹°ë§Œ ì£¼ì…ì‹œì¼œì£¼ë©´ ë©ë‹ˆë‹¤.       
ë”°ë¼ì„œ ë³„ë„ì˜ í™˜ê²½ ì„¤ì •ì€ í•„ìš” ì—†ìŠµë‹ˆë‹¤.       
         
* org/springframework/boot/autoconfigure :      
ë¯¸ë¦¬ êµ¬í˜„í•´ë†“ì€ ìë™ ì„¤ì • ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.       
ì´ë¦„ì€ ```[íŠ¹ì • ì„¤ì •ì˜ ì´ë¦„]Auto Configuration``` í˜•ì‹ìœ¼ë¡œ ì§€ì •ë˜ì–´ ìˆìœ¼ë©° ëª¨ë‘ ìë°” ì„¤ì • ë°©ì‹ì„ ë”°ë¥´ê³  ìˆìŠµë‹ˆë‹¤.       
   
ìœ„ íŒŒì¼ ëª¨ë‘ ```spring-boot-autoconfiguration```ì— ë¯¸ë¦¬ ì •ì˜ë˜ì–´ ìˆìœ¼ë©°      
ì§€ì •ëœ í”„ë¡œí¼í‹°ê°’ì„ ì‚¬ìš©í•˜ì—¬ ì„¤ì • í´ë˜ìŠ¤ ë‚´ë¶€ì˜ ê°’ë“¤ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.      
___
ì˜ˆë¥¼ ë“¤ì–´ H2ë¥¼ ìë™ ì„¤ì •í•œë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.   
   
1. ë¨¼ì € ```spring.factories```ì—ì„œ ìë™ ì„¤ì • ëŒ€ìƒì— í•´ë‹¹ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.           
      
**spring.factories**    
```
~ ìƒëµ ~
org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\    
~ ìƒëµ ~
```  
   
2. ```spring-configuration-metadata.json```ì— ì£¼ìš” í”„ë¡œí¼í‹°ê°’ë“¤ì€ ë¬´ì—‡ì´ê³  ì–´ë–¤ íƒ€ì…ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ì§€ë„ í™•ì¸í•©ë‹ˆë‹¤.     
     
**spring-configuration-metadata.json**     
```javascript
    ...
    {
      "sourceType": "org.springframework.boot.autoconfigure.h2.H2ConsoleProperties",
      "defaultValue": "\/h2-console",
      "name": "spring.h2.console.path",
      "description": "Path at which the console is available.",
      "type": "java.lang.String"
    },
    ...
```
H2 ê²½ë¡œì˜ ê¸°ë³¸ê°’ì€ ```/h2-console```ì´ê³  ```String í˜•```ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.         
ë‹¤ë¥¸ ê²½ë¡œë¡œ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œëŠ” ```application.properties```ë‚˜ ```application.yml```ì— í”„ë¡œí¼í‹°ê°’ì„ ì¶”ê°€í•©ë‹ˆë‹¤.           
       
**application.ymlì—ì„œ H2 PATH ë³€ê²½**           
```yml
spring:
  h2:
    console:
      path: /h2-test
```
    
**application.yml**   
```yml  
server:
  port: 80
---
spring:
  profiles: local
server:
  port: 8080
---
spring:
  profiles: dev
server:
  port: 8081
---
spring:
  profiles: real
server:
  port: 8082
---
property:
  test:
    name: property depth test
propertyTest: test
propertyTestList: a,b,c

fruit:
  list:
    - name: banana
      color: yellow
    - name: apple
      color: red
    - name: water melon
      color: green
      
spring:      
  h2:
    console:
      path: /h2-test      
```  
ìœ„ì™€ ê°™ì´ í”„ë¡œí¼í‹°ê°’ì„ ì¶”ê°€í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ì•ì„œ ì‚´í´ë³¸ ìë™ í™˜ê²½ ì„¤ì •ì— ìë™ìœ¼ë¡œ ì ìš©ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.      
    
ì§€ê¸ˆê¹Œì§€ ìë™ í™˜ê²½ ì„¤ì •ì˜ ì›ë¦¬ì™€ ì„¤ì • íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ ì„¤ì •ê°’ì„ ìˆ˜ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.     
ì‚¬ì‹¤ ìŠ¤í”„ë§ í”„ë¡œí¼í‹° ë¬¸ì„œë¥¼ ì‚¬ìš©í•˜ë©´ ë” ì‰½ê²Œ í”„ë¡œí¼í‹°ê°’ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.            
ì•„ë˜ í˜ì´ì§€ì— ì ‘ì†í•œ í›„ ```A. Common application properties``` ì¹´í…Œê³ ë¦¬ë¥¼ í´ë¦­í•˜ì—¬ ì´ë™í•˜ë©´ ë©ë‹ˆë‹¤.          
https://docs.spring.io/spring-boot/docs/current/reference/html/   
   
í•˜ì§€ë§Œ ìœ„ ì‘ì—…ì„ í†µí•´ ë™ì‘ ì›ë¦¬ê°€ ì–´ë–»ê²Œ ì¶”ìƒí™”ë˜ì—ˆëŠ”ì§€ ë‚´ë¶€ ì½”ë“œë¥¼ í†µí•´ íŒŒì•…í•˜ë©´ ì´ ê³¼ì •ì„ ì¢€ ë” ê¹Šê²Œ ì´í•´í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.      
ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ìë™ ì„¤ì •ì„ ì •í™•í•˜ê²Œ íŒŒì•…í–ˆìœ¼ë‹ˆ ì´ì œ ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ë¶€íŠ¸ë‹µê²Œ ì„¤ì •í•´ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.      
   
## 5.3. ìë™ ì„¤ì • ì–´ë…¸í…Œì´ì…˜ ì‚´í´ë³´ê¸°   
ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ìë™ ì„¤ì •ì´ ì ìš©ë˜ëŠ” **ì¡°ê±´, ì‹œì ** ë“±ì— ë‹¤ë¼ ë‹¤ì–‘í•œ ì–´ë…¸í…Œì´ì…˜ì„ ì§€ì›í•©ë‹ˆë‹¤.        
ì´ë¥¼ ì˜ ì•Œì•„ë‘ë©´ ì„¤ì • ê´€ë¦¬ ëŠ¥ë ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.       
       
ë˜í•œ ë‚˜ë§Œì˜ ìŠ¤íƒ€í„°ë¥¼ ìƒì„±í•˜ì—¬ ìµœì í™”ëœ ìë™ ì„¤ì • ê´€ë¦¬ ëŠ¥ë ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.      
ë¬¼ë¡  ì´ëŸ¬í•œ ê²½ìš°ëŠ” í”ì¹˜ ì•Šì§€ë§Œ íŒ€ì›ë“¤ì—ê²Œ ê³µí†µëœ ìŠ¤íƒ€í„°ë¥¼ ì œê³µí•˜ì—¬       
í”„ë¡œì íŠ¸ì˜ ì„¤ì •ì„ ê°„ì†Œí™”í•˜ê³  ì‹¶ì„ ë•Œ í˜¹ì€ ì˜¤í”ˆ ì†ŒìŠ¤ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ì„ë•Œë„ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.       

ìë™ ì„¤ì • ê´€ë ¨ ì–´ë…¸í…Œì´ì…˜ì„ ë¨¼ì € ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.   
ë‹¤ìŒì€ ìë™ ì„¤ì •ì„ ìœ„í•œ ì¡°ê±´ ì–´ë…¸í…Œì´ì…˜ ì…ë‹ˆë‹¤.   

[ê·¸ë¦¼]
  
```java
@ConditionalOnBean : í•´ë‹¹í•˜ëŠ” ë¹ˆ í´ë˜ìŠ¤ë‚˜ ì´ë¦„ì´ ë¯¸ë¦¬ ë¹ˆ íŒ©í† ë¦¬ì— í¬í•¨ë˜ì–´ ìˆì„ ê²½ìš°  

@ConditionalOnClass : í•´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ê°€ í´ë˜ìŠ¤ ê²½ë¡œì— ìˆì„ ê²½ìš° 

@ConditionalOnCloudPlatform : í•´ë‹¹í•˜ëŠ” í´ë¼ìš°ë“œ í”Œë«í¼ì´ í™œìš© ìƒíƒœì¼ ê²½ìš°   

@ConditionalOnExpression : SpELì— ì˜ì¡´í•˜ëŠ” ì¡°ê±´ì¼ ê²½ìš° 

@ConditionalOnJava : JVM ë²„ì „ì´ ì¼ì¹˜í•˜ëŠ” ê²½ìš°  

@ConditionalOnJndi : JNDIê°€ ì‚¬ìš© ê°€ëŠ¥í•˜ê³  íŠ¹ì • ìœ„ì¹˜ì— ìˆëŠ” ê²½ìš°

@ConditionalOnMissingBean : í•´ë‹¹í•˜ëŠ” ë¹ˆ í´ë˜ìŠ¤ë‚˜ ì´ë¦„ì´ ë¯¸ë¦¬ ë¹ˆ íŒ©í† ë¦¬ì— í¬í•¨ë˜ì§€ ì•Šì€ ê²½ìš°   

@ConditionalOnMissingClass : í•´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ê°€ í´ë˜ìŠ¤ ê²½ë¡œì— ì—†ì„ ê²½ìš°   

@ConditionalOnNotWebApplication : ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì•„ë‹Œ ê²½ìš°  

@ConditionalOnProperty : íŠ¹ì •í•œ í”„ë¡œí¼í‹°ê°€ ì§€ì •í•œ ê°’ì„ ê°–ëŠ” ê²½ìš°    

@ConditionalOnResource : íŠ¹ì •í•œ ë¦¬ì†ŒìŠ¤ê°€ í´ë˜ìŠ¤ ê²½ë¡œì— ìˆëŠ” ê²½ìš° 

@ConditionalOnSingleCandidate : ì§€ì •í•œ ë¹ˆ í´ë˜ìŠ¤ê°€ ì´ë¯¸ ë¹ˆ íŒ©í† ë¦¬ì— í¬í•¨ë˜ì–´ ìˆê³  ë‹¨ì¼ í›„ë³´ìë¡œ ì§€ì • ê°€ëŠ¥í•œ ê²½ìš°      

@ConditionalOnWebApplication : ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì¸ ê²½ìš°     
```
ë‹¤ìŒì€ ìë™ ì„¤ì •ì„ ìœ„í•œ ìˆœì„œ ì–´ë…¸í…Œì´ì…˜ ì…ë‹ˆë‹¤.  

[ì‚¬ì§„]  

```java
@AutoConfigureAfter : ì§€ì •í•œ íŠ¹ì • ìë™ ì„¤ì • í´ë˜ìŠ¤ë“¤ì´ ì ìš©ëœ ì´í›„ì— í•´ë‹¹ ìë™ ì„¤ì • ì ìš©   

@AutoConfigureBefore : ì§€ì •í•œ íŠ¹ì • ìë™ ì„¤ì • í´ë˜ìŠ¤ë“¤ì´ ì ìš©ë˜ê¸° ì´ì „ì— í•´ë‹¹ ìë™ ì„¤ì • ì ìš©  

@AutoConfigureOrder : ìë™ ì„¤ì • ìˆœì„œ ì§€ì •ì„ ìœ„í•œ   
ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ @Order ë³€í˜• ì–´ë…¸í…Œì´ì…˜ ê¸°ì¤€ì˜ ì„¤ì • í´ë˜ìŠ¤ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ìë™ ì„¤ì • í´ë˜ìŠ¤ë“¤ ê°„ì˜ ìˆœì„œë§Œ ì§€ì •    
```

ìë™ ì„¤ì • ê´€ë ¨ ì–´ë…¸í…Œì´ì…˜ì„ ì‚´í´ë³´ì•˜ìœ¼ë‹ˆ ì´ì œ, ì–´ë–»ê²Œ ì“°ì´ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.    
     
**H2ConsoleAutoConfiguration**       
```java
/*
 * Copyright 2012-2017 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package org.springframework.boot.autoconfigure.h2;

import org.h2.server.web.WebServlet;

import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;
import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;
import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;
import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication.Type;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.boot.web.servlet.ServletRegistrationBean;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

/**
 * {@link EnableAutoConfiguration Auto-configuration} for H2's web console.
 *
 * @author Andy Wilkinson
 * @author Marten Deinum
 * @author Stephane Nicoll
 * @since 1.3.0
 */
@Configuration
@ConditionalOnWebApplication(type = Type.SERVLET)
@ConditionalOnClass(WebServlet.class)
@ConditionalOnProperty(prefix = "spring.h2.console", name = "enabled", havingValue = "true", matchIfMissing = false)
@EnableConfigurationProperties(H2ConsoleProperties.class)
public class H2ConsoleAutoConfiguration {

	private final H2ConsoleProperties properties;

	public H2ConsoleAutoConfiguration(H2ConsoleProperties properties) {
		this.properties = properties;
	}

	@Bean
	public ServletRegistrationBean<WebServlet> h2Console() {
		String path = this.properties.getPath();
		String urlMapping = (path.endsWith("/") ? path + "*" : path + "/*");
		ServletRegistrationBean<WebServlet> registration = new ServletRegistrationBean<>(
				new WebServlet(), urlMapping);
		H2ConsoleProperties.Settings settings = this.properties.getSettings();
		if (settings.isTrace()) {
			registration.addInitParameter("trace", "");
		}
		if (settings.isWebAllowOthers()) {
			registration.addInitParameter("webAllowOthers", "");
		}
		return registration;
	}

}
```
ì¡°ê±´ ì–´ë…¸í…Œì´ì…˜ì— ë”°ë¼ H2 ìë™ ì„¤ì • ì ìš© ì—¬ë¶€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.        
ìœ„ í´ë˜ìŠ¤ì—ì„œëŠ” ë‹¤ìŒ 3ê°€ì§€ ì¡°ê±´ì´ ë¶€í•©í•  ë•Œ ```H2ConsoleAutoConfiguration```ê°€ ì ìš©ë©ë‹ˆë‹¤.        
      
1. ```@ConditionalOnWebApplication(type = Type.SERVLET)``` : ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì¼ ë•Œ      
2. ```@ConditionalOnClass(WebServlet.class)``` : ```WebServlet.class```ê°€ ê²½ë¡œì— ìˆì„ ë•Œ   
3. ```@ConditionalOnProperty(prefix = "spring.h2.console", name = "enabled", havingValue = "true", matchIfMissing = false)``` :   
```spring.h2.console.enabled``` ê°’ì´ ```true``` ì¼ ë•Œ        
  
ìë™ ì„¤ì • í”„ë¡œí¼í‹°ê°€ ì ìš©ë  ë•Œ ```H2ConsoleProperties``` í´ë˜ìŠ¤ íƒ€ì…ìœ¼ë¡œ H2 ê´€ë ¨ í”„ë¡œí¼í‹°ê°’ì„ ë§¤í•‘í•˜ì—¬ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.         
ì´ëŸ¬í•œ ì‘ì—…ì„ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” ì¼ì¼ì´ ì‘ì—…í•´ì•¼ í–ˆì§€ë§Œ ë¶€íŠ¸ì—ì„œëŠ” ë¯¸ë¦¬ ì„¤ì •í•œ ë°©ì‹ëŒ€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©í•˜ê²Œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.   
   
## 5.4. H2 Console ìë™ ì„¤ì • ì ìš©í•˜ê¸°   
ê¸°ì¡´ ìŠ¤í”„ë§ ë°© ì‚¬ìš©í•œë‹¤ë©´ ì•„ë˜ì™€ ê°™ì€ ë°©ì‹ì„ ì·¨í–ˆì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.     

```gradle
compile('com.h2database:h2')    
```
```java
@Configuration
public class DataSourceConfig{
	
	@Bean
	ServletRegistrationBean h2ServletRegistration(){
		ServletRegistration registrationBean = new ServletRegistrationBean(new WebServlet);   
		registrationBean.addUrlMappings("/console/*");   
		return registrationBean;
	}
}
```
í•˜ì§€ë§Œ ìœ„ ê°™ì€ ë°©ë²•ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ ìë™ ì„¤ì •ì„ ëª¨ë¥¼ë•Œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.         
ìš°ë¦¬ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ ìë™ ì„¤ì • ë°©ì‹ì„ ì•Œê³  ìˆìœ¼ë‹ˆ ë‹¨ìˆœíˆ **ì„¤ì • í”„ë¡œí¼í‹°ê°’ë§Œ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤.**     
   
ìš°ì„  H2í”„ë¡œí¼í‹°ê°’ìœ¼ë¡œ ê¸°ë³¸ ì„¤ì •ê°’ì´ ë¬´ì—‡ì¸ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.   
     
![h2 í”„ë¡œí¼í‹°](https://user-images.githubusercontent.com/50267433/85651823-03c0ff00-b6e4-11ea-9870-680f8caf2214.PNG)           
    
**spring-configuration-metadata.json**   
```
    {
      "sourceType": "org.springframework.boot.autoconfigure.h2.H2ConsoleProperties",
      "defaultValue": false,
      "name": "spring.h2.console.enabled",
      "description": "Whether to enable the console.",
      "type": "java.lang.Boolean"
    },
    {
      "sourceType": "org.springframework.boot.autoconfigure.h2.H2ConsoleProperties",
      "defaultValue": "\/h2-console",
      "name": "spring.h2.console.path",
      "description": "Path at which the console is available.",
      "type": "java.lang.String"
    },
    {
      "sourceType": "org.springframework.boot.autoconfigure.h2.H2ConsoleProperties$Settings",
      "defaultValue": false,
      "name": "spring.h2.console.settings.trace",
      "description": "Whether to enable trace output.",
      "type": "java.lang.Boolean"
    },
    {
      "sourceType": "org.springframework.boot.autoconfigure.h2.H2ConsoleProperties$Settings",
      "defaultValue": false,
      "name": "spring.h2.console.settings.web-allow-others",
      "description": "Whether to enable remote access.",
      "type": "java.lang.Boolean"
    },
```
**ë™ì‘ ì˜ˆì‹œ**   
```properties
spring.h2.console.enabled=false
spring.h2.console.path=/h2-console
spring.h2.console.settings.trace=false
spring.h2.console.settings.web-allow-others=false
```
ìŠ¤í”„ë§ë¶€íŠ¸ API ë¬¸ì„œë¥¼ ì°¸ì¡°í–ˆì„ ë•Œ ìœ„ì™€ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤.           
ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì•Œ ìˆ˜ ìˆëŠ” ì ì€ **spring-configuration-metadata.json** ì„ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.       
      
ë¶„ëª…íˆ ```H2ConsoleAutoConfiguration```ì—ì„œ      
```@ConditionalOnProperty(prefix = "spring.h2.console", name = "enabled", havingValue = "true", matchIfMissing = false)``` í˜•íƒœ     
ì¦‰, ```spring.h2.console.enabled``` property ì˜ ê°’ì´ ```true```ì¼ ê²½ìš°ì— ë™ì‘í•œë‹¤ëŠ” ì¡°ê±´ì´ ìˆì—ˆëŠ”ë°      
```spring.h2.console.enabled=false``` ë””í´íŠ¸ ê°’ìœ¼ë¡œ ```false``` ê°€ ë˜ì–´ìˆìŠµë‹ˆë‹¤.        
ê·¸ë ‡ê¸°ì— h2 ê°€ ì‹¤í–‰ì´ ë˜ì§€ ì•Šì•˜ë˜ ê²ƒì´ê³  ë‹¤ë¥´ê²Œ ë§í•˜ë©´ ```spring.h2.console.enabled=true```ë¡œ ë°”ê¿”ì£¼ë©´ h2ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.         
     
ì´ì œ ```application.properties``` ë‚˜ ```application.yml``` íŒŒì¼ì„ ì¡°ì‘í•˜ì—¬ ì½˜ì†”ì„ í™œì„±í™” í•˜ê² ìŠµë‹ˆë‹¤.   
   
```yml  
# h2 ë©”ëª¨ë¦¬ dbë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„¤ì • 
datasource:
  url: jdbc:h2:mem:testdb
  
spring:
  h2:
    console:
      enabled: true;
```
   
**application.yml**   
```yml
server:
  port: 80
---
spring:
  profiles: local
server:
  port: 8080
---
spring:
  profiles: dev
server:
  port: 8081
---
spring:
  profiles: real
server:
  port: 8082
---
property:
  test:
    name: property depth test
propertyTest: test
propertyTestList: a,b,c

fruit:
  list:
    - name: banana
      color: yellow
    - name: apple
      color: red
    - name: water melon
      color: green

# h2 ë©”ëª¨ë¦¬ dbë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„¤ì •
datasource:
  url: jdbc:h2:mem:testdb

spring:
  h2:
    console:
      enabled: true
      path: /h2-test
```


ì»´íŒŒì¼ì— í¬í•¨ë˜ë„ë¡ H2ì˜ì¡´ì„±ì„ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.        
H2 ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë³´í†µ í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œë§Œ ì“°ì…ë‹ˆë‹¤.      
ì£¼ ì €ì¥ì†Œê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•˜ê²Œ ì»´íŒŒì¼ ì˜ì¡´ì„±ì— í¬í•¨ë  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.     
        
ì´ì œ ì½˜ì†”ì„ ìœ„í•œ ì„¤ì •ì„ í–ˆë‹¤ë©´ ì´ì œëŠ” ëŸ°íƒ€ì„ ì‹œì ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ë‹¤ìŒê³¼ ê°™ì´ ë°”ê¿”ì¤˜ë„ ë©ë‹ˆë‹¤.    
   
**build.gradle**
```gradle

buildscript {
	ext{
		springBootVersion = '2.0.3.RELEASE'
	}
	repositories {
		mavenCentral()
		jcenter()
	}
	dependencies {
		classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
	}
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'org.springframework.boot'
apply plugin: 'io.spring.dependency-management'

group = 'community'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = 1.8

repositories {
	mavenCentral()
	jcenter()
}

dependencies {
	compile('org.springframework.boot:spring-boot-starter-web')
	compile('org.projectlombok:lombok')
	compile('com.h2database:h2')
	testCompile('org.springframework.boot:spring-boot-starter-test'){
		exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'
	}
}

test {
	useJUnitPlatform()
}

```
ì‚¬ì‹¤ ë‹¤ë¥¸ ê´€ì ì—ì„œ ë³´ë©´ ì´ ëª¨ë“  ì›ë¦¬ë¥¼ íŒŒì•…í•˜ëŠ”ê²Œ ë¶ˆí•„ìš”í•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.   
í•˜ì§€ë§Œ ìë™ ì„¤ì •ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.   
ë”°ë¼ì„œ í•œ ë²ˆì¯¤ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì‚´í´ë³¼ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.   
ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ í™˜ê²½ì„ ì œì–´í•˜ê³  íš¨ê³¼ì ìœ¼ë¡œ ê°œë°œ í™˜ê²½ì„ ìµœì í™”í•˜ëŠ”ë° ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.    

***
# 6. ë§ˆì¹˜ë©°   
ì¸í…”ë¦¬ì œì´ì™€ ê·¸ë ˆì´ë“¤ì„ ì„¤ì¹˜í•˜ê³  ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ê½ƒì´ë¼ê³  í•  ìˆ˜ ìˆëŠ” ìë™ í™˜ê²½ ì„¤ì •ì„ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.   
í™˜ê²½ ì„¤ì •ë§Œí¼ì€ ë‚´ë¶€ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.    
ê·¸ë˜ì•¼ ì•ìœ¼ë¡œ ë‹¤ì–‘í•œ ìë™í™” ì„¤ì •ì„ ì ìš©í•  ë•Œ ë¬´ì—‡ì´ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê³  ì›í•˜ëŠ” ìµœì ì˜ ì„¤ì •ì„ ë°˜ì˜í•  ìˆ˜ ìˆì„í…Œë‹ˆê¹Œìš”   
ì•ì—ì„œ ì œì‹œí•œ ì ˆì°¨ë¥¼ ë”°ë¼ ë³¸ì¸ ìŠ¤ìŠ¤ë¡œê°€ ë‹¤ë¥¸ ì„¤ì •ë„ ì°¾ê³  ì ìš©í•˜ëŠ” ì—°ìŠµì„ í•œë‹¤ë©´ ëˆ„êµ¬ë³´ë‹¤ íš¨ê³¼ì ìœ¼ë¡œ ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê²ë‹ˆë‹¤.   
  


  
```
ìŠ¤í”„ë§ì—ì„œ í”„ë¡œí¼í‹°ì— ëŒ€í•œ ì„¤ì •ì€ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.  
í”„ë¡œí¼í‹°**   
* ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆëŠ” ì„¤ì •ê°’
* Environmentì˜ ì—­í• ì€ í”„ë¡œí¼í‹° ì†ŒìŠ¤ ì„¤ì • ë° í”„ë¡œí¼í‹° ê°’ ê°€ì ¸ì˜¤ê¸°

í”„ë¡œí¼í‹°ì—ëŠ” ìš°ì„  ìˆœìœ„ê°€ ìˆë‹¤.
**StandardServletEnvironmentì˜ ìš°ì„ ìˆœìœ„**   

1. ServletConfig ë§¤ê°œë³€ìˆ˜
2. ServletContext ë§¤ê°œë³€ìˆ˜
3. JNDI (java:comp/env/)
4. JVM ì‹œìŠ¤í…œ í”„ë¡œí¼í‹° (-Dkey=â€valueâ€)
5. JVM ì‹œìŠ¤í…œ í™˜ê²½ ë³€ìˆ˜ (ìš´ì˜ ì²´ì œ í™˜ê²½ ë³€ìˆ˜)

@PropertySource

   
# @PropertySource    
   
@PropertySourceì„ ì´ìš©í•˜ë©´ **properties íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.**     


â— Environmentë¥¼ í†µí•´ í”„ë¡œí¼í‹° ì¶”ê°€í•˜ëŠ” ë°©ë²•
ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ì™¸ë¶€ ì„¤ì • ì°¸ê³ 
â— ê¸°ë³¸ í”„ë¡œí¼í‹° ì†ŒìŠ¤ ì§€ì› (application.properties)
â— í”„ë¡œíŒŒì¼ê¹Œì§€ ê³ ë ¤í•œ ê³„ì¸µí˜• í”„ë¡œí¼í‹° ìš°ì„  ìˆœìœ„ ì œê³µ
```
## í”„ë¡œíŒŒì¼ì— ë”°ë¥¸ í™˜ê²½ êµ¬ì„± ë¶„ë¦¬   
ì‹¤ì œ ì„œë¹„ìŠ¤ëŠ” **`í…ŒìŠ¤íŠ¸`, `ë¡œì»¬`, `ê°œë°œ`, `ìš´ì˜`ì˜ ì„¤ì •ì„ ë‚˜ëˆ„ëŠ” ê²½ìš°ê°€ ë§ë‹¤.**           
ì´ëŸ¬í•œ ê°œë°œ í™˜ê²½ì„ ë‚˜ëˆ„ê¸° ìœ„í•´ **`profile ì„¤ì •` ë° `profile ë³„ë¡œ í”„ë¡œí¼í‹° íŒŒì¼`ì„ ì‘ì„±í•œë‹¤.**          

   
**YAML** íŒŒì¼ì—ì„œ í”„ë¡œí¼í‹° ì„¤ì •ì„ êµ¬ë¶„í•˜ëŠ” ë°©ë²•ì€ ê°„ë‹¨í•©ë‹ˆë‹¤.   
ë‹¤ìŒê³¼ ê°™ì´ ```---``` ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¤ì •ê°’ì„ ë‚˜ëˆ•ë‹ˆë‹¤.   
    
**application.yml**
```yml   
server:
  port: 80
---
spring: 
  profiles: local
server:
  port: 8080
---
spring:
  profiles: dev
server:
  port: 8081
---
spring:
  profiles: real
server:
  port: 8082
---
```
ìµœìƒë‹¨ì— ```server.port``` í”„ë¡œí¼í‹°ê°’ì„ 80ìœ¼ë¡œ ì„¤ì •í•œ ë¶€ë¶„ì€ í”„ë¡œíŒŒì¼ê³¼ëŠ” ìƒê´€ì—†ì´ ë””í´íŠ¸ë¡œ ì •ì˜ë˜ëŠ” ì˜ì—­ì…ë‹ˆë‹¤.       
**ë˜ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ```application-[profile].yml```ì„ ì´ìš©í•˜ëŠ” ê²ë‹ˆë‹¤.**                    
     
```[profile]```ì— ì›í•˜ëŠ” í”„ë¡œíŒŒì¼ ê°’ìœ¼ë¡œ YAML íŒŒì¼ì„ ì¶”ê°€í•˜ë©´             
ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œ ```application-[profile].yml```ì—ì„œ ì§€ì •í•œ í”„ë¡œíŒŒì¼ê°’ì„ ë°”íƒ•ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.          
ì¦‰, **í˜¸ì¶œí•œ ```yml```ì´ ìš°ì„ ìˆœìœ„ê°€ ë˜ê³  ì´ì™¸ì— ì¡´ì¬í•˜ëŠ” í”„ë¡œí¼í‹°ë“¤ë„ ```applcaiton.yml```ìˆœì„œì— ë”°ë¼ ì„¤ì •ë©ë‹ˆë‹¤.**            
   
### ì´ë²ˆì—ëŠ” í”„ë¡œíŒŒì¼ê°’ì„ ì ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.   
```local```, ```dev```, ```real```ê³¼ ê°™ì´ ê°ê°ì˜ í”„ë¡œíŒŒì¼ê°’ì„ ë”°ë¡œ ì§€ì •í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•œë‹¤ ê°€ì •í•©ë‹ˆë‹¤.   
ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ëŠ” JAR íŒŒì¼ë¡œ ë¹Œë“œí•˜ê¸°ì— ì„œë²„ì—ì„œ ì§ì ‘ ê°„ë‹¨í•œ ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.    
   
ì•„ë˜ ì™€ ê°™ì´ ì‹¤í–‰í•˜ì—¬ í”„ë¡œíŒŒì¼ ê°’ì„ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
$ java -jar -D spring.profiles.active=dev
```
```
java -Dspring.profiles.active=dev -jar [jaríŒŒì¼ëª…].jar
java -jar [jaríŒŒì¼ëª…].jar --spring.profiles.active=dev
```
ì¶œì²˜: https://freestrokes.tistory.com/106 [FREESTROKES DEVLOG]     
      
      
ì¸í…”ë¦¬ì œì´ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ ì‹¤í–‰ í”ŒëŸ¬ê·¸ì¸ì„ ë”°ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—       
```Edit Configurations``` ë²„íŠ¼ì„ ëˆŒëŸ¬ ```Run/Debug configurations``` ì°½ì„ ì‹¤í–‰í•˜ê³      
ìŠ¤í”„ë§ ë¶€íŠ¸ í”ŒëŸ¬ê·¸ì¸ì˜ í”„ë¡œíŒŒì¼ ê°’ì„ í• ë‹¹í•˜ë©´ ë©ë‹ˆë‹¤.      

**ì–¼í‹°ë©”ì´íŠ¸ì™€ ì»¤ë®¤ë‹ˆí‹°ëŠ” Application íƒ€ì…ì´ ë‹¬ë¼ì„œ í™˜ê²½ì´ ë‹¤ë¥´ë‹¤**    
ì»¤ë®¤ë‹ˆí‹°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ```VM options:```ì— ```-Dspring.profiles.active=dev```ë¡œ ì„¤ì •í•´ì£¼ë©´ëœë‹¤.   
   
[ì‚¬ì§„]   
    
YAML íŒŒì¼ì„ ì‚¬ìš©í•˜ë©´ ê¹Šì´ì— ë”°ë¼ ê´€ê³„ë¥¼ êµ¬ë¶„ ì§“ê¸° ë•Œë¬¸ì—      
```List```, ```Set```, ```Map``` ë“± ë‹¤ì–‘í•œ ë°”ì¸ë”©í˜• ë§¤í•‘ì´ í›¨ì”¬ í¸í•©ë‹ˆë‹¤.     
      
YAML íŒŒì¼ì— ìˆëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ë‹¤ì–‘í•©ë‹ˆë‹¤. (propertiesì˜ ë§¤í•‘ ë°©ë²•ë„ ê°™ìŠµë‹ˆë‹¤.)          

